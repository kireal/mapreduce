Author: Chufarov Kirill aka kireal.
18.08.2013
=================================================================================================
1. This's example of MapReduce coding approach.
2. Reduce side join two DataSets writing python scripts (Map and Reduce) and using hadoop 
streaming.
3. Have got two dataasets. Need to join two datasets by Country Code.
4. Explain:

	./data directory contains example data Countries.csv (Country Code, Country Name) and 
	Cities.csv (City, Country Code, Popelation)
	
	./joinmapper.py - python script implements mapper function, parse input from files and 
	extract join key and value
	
	./joinreduce.py - python script implemets reducer function, join two datasets. 
	This one uses ENV variable JoinType to define type of join (Full. Left, Right, Inner). 
	For instance: export JoinType=Inner

=================================================================================================

How to start this demo:
	1. Install hadoop (simplest way: one node cloudera hadoop)
	2. Put datafiles to HDFS:
		2.1 create input directory
			[kireal@hadoop0 ~]$ hadoop fs -mkdir /user/kireal/join
			[kireal@hadoop0 ~]$ hadoop fs -mkdir /user/kireal/join/reduceside
			[kireal@hadoop0 ~]$ hadoop fs -mkdir /user/kireal/join/reduceside/input
		2.3 put files
			[kireal@hadoop0 ~]$ hadoop fs -put /tmp/Countries.csv /user/kireal/join/reduceside/input/
			[kireal@hadoop0 ~]$ hadoop fs -put /tmp/Cities.csv /user/kireal/join/reduceside/input/
			[kireal@hadoop0 ~]$ hadoop fs -cat /user/kireal/join/reduceside/input/*
			....
	3. Run hadoop command:

hadoop jar /opt/cloudera/parcels/CDH-4.3.0-1.cdh4.3.0.p0.22/lib/hadoop-mapreduce/hadoop-streaming.jar \
-file /home/kireal/mapred/join/reduceside/joinmapper.py -mapper joinmapper.py \
-file /home/kireal/mapred/join/reduceside/joinreducer.py -reducer joinreducer.py \
-input  /user/kireal/join/reduceside/input -output /user/kireal/join/reduceside/output
	
	4. Check results
		hadoop dfs cat
	5. Think about so you're cool. You're almost data scientist!